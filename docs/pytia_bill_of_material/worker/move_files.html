<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>pytia_bill_of_material.worker.move_files API documentation</title>
<meta name="description" content="Moves all files to their destination." />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>pytia_bill_of_material.worker.move_files</code></h1>
</header>
<section id="section-intro">
<p>Moves all files to their destination.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;
    Moves all files to their destination.
&#34;&#34;&#34;

import os
from pathlib import Path

from app.main.vars import Variables
from const import BOM
from const import BUNDLE
from const import DOCKETS
from const import DOCUMENTATION
from const import DRAWINGS
from const import JPGS
from const import STLS
from const import STPS
from protocols.task_protocol import TaskProtocol
from pytia.log import log
from pytia_ui_tools.utils.files import file_utility

from .runner import Runner


class MoveFilesTask(TaskProtocol):
    &#34;&#34;&#34;
    Moves all files to their destination after the export.

    Args:
        TaskProtocol (_type_): The task runner protocol.
    &#34;&#34;&#34;

    __slots__ = &#34;_runner&#34;

    def __init__(self, runner: Runner, export_root_path: Path, vars: Variables) -&gt; None:
        &#34;&#34;&#34;
        Inits the class.

        Args:
            runner (Runner): The runner instance for handling UI elements.
        &#34;&#34;&#34;
        self.runner = runner
        self.export_root_path = export_root_path
        self.vars = vars

    def run(self) -&gt; None:
        &#34;&#34;&#34;Runs the task.&#34;&#34;&#34;
        log.info(&#34;Moving files.&#34;)

        self._add_move(
            source=Path(self.export_root_path, BOM),
            target=Path(self.vars.bom_export_path.get()).parent,
        )
        self._add_move(
            source=Path(self.export_root_path, DOCUMENTATION),
            target=Path(self.vars.documentation_export_path.get()),
        )

        if self.vars.bundle.get():
            self._add_move(
                source=Path(self.export_root_path, BUNDLE),
                target=Path(self.vars.bundle_export_path.get()),
            )
        else:
            self._add_move(
                source=Path(self.export_root_path, DOCKETS),
                target=Path(self.vars.docket_export_path.get()),
            )
            self._add_move(
                source=Path(self.export_root_path, DRAWINGS),
                target=Path(self.vars.drawing_export_path.get()),
            )
            self._add_move(
                source=Path(self.export_root_path, STLS),
                target=Path(self.vars.stl_export_path.get()),
            )
            self._add_move(
                source=Path(self.export_root_path, STPS),
                target=Path(self.vars.stp_export_path.get()),
            )
            self._add_move(
                source=Path(self.export_root_path, JPGS),
                target=Path(self.vars.jpg_export_path.get()),
            )

        for item in file_utility.move_items:
            self.runner.add(
                func=file_utility.move_item,
                name=f&#34;Moving file {item.target.name!r}&#34;,
                item=item,
            )
        for item in file_utility.delete_items:
            self.runner.add(
                func=file_utility.delete_item,
                name=f&#34;Deleting file {str(item.path)!r}&#34;,
                item=item,
            )
        self.runner.run_tasks()

    def _add_move(self, source: Path, target: Path) -&gt; None:
        &#34;&#34;&#34;Moves every file inside the source dir to the target dir.&#34;&#34;&#34;
        for abs_file in source.rglob(&#34;*.*&#34;):
            rel_file = abs_file.relative_to(source)
            target_file = Path(target, rel_file)
            os.makedirs(
                target_file.parent, exist_ok=True
            )  # TODO: Integrate this into file_utility
            file_utility.add_move(source=abs_file, target=target_file)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="pytia_bill_of_material.worker.move_files.MoveFilesTask"><code class="flex name class">
<span>class <span class="ident">MoveFilesTask</span></span>
<span>(</span><span>runner: <a title="pytia_bill_of_material.worker.runner.Runner" href="runner.html#pytia_bill_of_material.worker.runner.Runner">Runner</a>, export_root_path: pathlib.Path, vars: app.main.vars.Variables)</span>
</code></dt>
<dd>
<div class="desc"><p>Moves all files to their destination after the export.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>TaskProtocol</code></strong> :&ensp;<code>_type_</code></dt>
<dd>The task runner protocol.</dd>
</dl>
<p>Inits the class.</p>
<h2 id="args_1">Args</h2>
<dl>
<dt><strong><code>runner</code></strong> :&ensp;<code>Runner</code></dt>
<dd>The runner instance for handling UI elements.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MoveFilesTask(TaskProtocol):
    &#34;&#34;&#34;
    Moves all files to their destination after the export.

    Args:
        TaskProtocol (_type_): The task runner protocol.
    &#34;&#34;&#34;

    __slots__ = &#34;_runner&#34;

    def __init__(self, runner: Runner, export_root_path: Path, vars: Variables) -&gt; None:
        &#34;&#34;&#34;
        Inits the class.

        Args:
            runner (Runner): The runner instance for handling UI elements.
        &#34;&#34;&#34;
        self.runner = runner
        self.export_root_path = export_root_path
        self.vars = vars

    def run(self) -&gt; None:
        &#34;&#34;&#34;Runs the task.&#34;&#34;&#34;
        log.info(&#34;Moving files.&#34;)

        self._add_move(
            source=Path(self.export_root_path, BOM),
            target=Path(self.vars.bom_export_path.get()).parent,
        )
        self._add_move(
            source=Path(self.export_root_path, DOCUMENTATION),
            target=Path(self.vars.documentation_export_path.get()),
        )

        if self.vars.bundle.get():
            self._add_move(
                source=Path(self.export_root_path, BUNDLE),
                target=Path(self.vars.bundle_export_path.get()),
            )
        else:
            self._add_move(
                source=Path(self.export_root_path, DOCKETS),
                target=Path(self.vars.docket_export_path.get()),
            )
            self._add_move(
                source=Path(self.export_root_path, DRAWINGS),
                target=Path(self.vars.drawing_export_path.get()),
            )
            self._add_move(
                source=Path(self.export_root_path, STLS),
                target=Path(self.vars.stl_export_path.get()),
            )
            self._add_move(
                source=Path(self.export_root_path, STPS),
                target=Path(self.vars.stp_export_path.get()),
            )
            self._add_move(
                source=Path(self.export_root_path, JPGS),
                target=Path(self.vars.jpg_export_path.get()),
            )

        for item in file_utility.move_items:
            self.runner.add(
                func=file_utility.move_item,
                name=f&#34;Moving file {item.target.name!r}&#34;,
                item=item,
            )
        for item in file_utility.delete_items:
            self.runner.add(
                func=file_utility.delete_item,
                name=f&#34;Deleting file {str(item.path)!r}&#34;,
                item=item,
            )
        self.runner.run_tasks()

    def _add_move(self, source: Path, target: Path) -&gt; None:
        &#34;&#34;&#34;Moves every file inside the source dir to the target dir.&#34;&#34;&#34;
        for abs_file in source.rglob(&#34;*.*&#34;):
            rel_file = abs_file.relative_to(source)
            target_file = Path(target, rel_file)
            os.makedirs(
                target_file.parent, exist_ok=True
            )  # TODO: Integrate this into file_utility
            file_utility.add_move(source=abs_file, target=target_file)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>protocols.task_protocol.TaskProtocol</li>
<li>typing.Protocol</li>
<li>typing.Generic</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="pytia_bill_of_material.worker.move_files.MoveFilesTask.run"><code class="name flex">
<span>def <span class="ident">run</span></span>(<span>self) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>Runs the task.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def run(self) -&gt; None:
    &#34;&#34;&#34;Runs the task.&#34;&#34;&#34;
    log.info(&#34;Moving files.&#34;)

    self._add_move(
        source=Path(self.export_root_path, BOM),
        target=Path(self.vars.bom_export_path.get()).parent,
    )
    self._add_move(
        source=Path(self.export_root_path, DOCUMENTATION),
        target=Path(self.vars.documentation_export_path.get()),
    )

    if self.vars.bundle.get():
        self._add_move(
            source=Path(self.export_root_path, BUNDLE),
            target=Path(self.vars.bundle_export_path.get()),
        )
    else:
        self._add_move(
            source=Path(self.export_root_path, DOCKETS),
            target=Path(self.vars.docket_export_path.get()),
        )
        self._add_move(
            source=Path(self.export_root_path, DRAWINGS),
            target=Path(self.vars.drawing_export_path.get()),
        )
        self._add_move(
            source=Path(self.export_root_path, STLS),
            target=Path(self.vars.stl_export_path.get()),
        )
        self._add_move(
            source=Path(self.export_root_path, STPS),
            target=Path(self.vars.stp_export_path.get()),
        )
        self._add_move(
            source=Path(self.export_root_path, JPGS),
            target=Path(self.vars.jpg_export_path.get()),
        )

    for item in file_utility.move_items:
        self.runner.add(
            func=file_utility.move_item,
            name=f&#34;Moving file {item.target.name!r}&#34;,
            item=item,
        )
    for item in file_utility.delete_items:
        self.runner.add(
            func=file_utility.delete_item,
            name=f&#34;Deleting file {str(item.path)!r}&#34;,
            item=item,
        )
    self.runner.run_tasks()</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="pytia_bill_of_material.worker" href="index.html">pytia_bill_of_material.worker</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="pytia_bill_of_material.worker.move_files.MoveFilesTask" href="#pytia_bill_of_material.worker.move_files.MoveFilesTask">MoveFilesTask</a></code></h4>
<ul class="">
<li><code><a title="pytia_bill_of_material.worker.move_files.MoveFilesTask.run" href="#pytia_bill_of_material.worker.move_files.MoveFilesTask.run">run</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>